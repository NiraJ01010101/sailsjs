<div class="container mx-auto p-8">
    <h1 class="text-3xl font-semibold mb-4">User List</h1>

    <% if (users.length===0) { %>
        <div class="text-center text-xl text-gray-400">
            No data available.
        </div>
        <% } else { %>
            <table class="min-w-full table-auto bg-gray-800 rounded-lg">
                <thead>
                    <tr class="border-b border-gray-700">
                        <th class="py-2 px-4 text-left">Username</th>
                        <th class="py-2 px-4 text-left">Email</th>
                        <th class="py-2 px-4 text-left">Role</th>
                        <th class="py-2 px-4 text-left">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <% users.forEach(function(user) { %>
                        <tr class="border-b border-gray-700">
                            <td class="py-2 px-4">
                                <%= user.username %>
                            </td>
                            <td class="py-2 px-4">
                                <%= user.email %>
                            </td>
                            <td class="py-2 px-4">
                                <%= user.role %>
                            </td>
                            <td class="py-2 px-4">
                                <select name="<%= user.id %>" class="bg-gray-200 text-black py-1 px-3 rounded-md"
                                    onchange="updateUserStatus(event)">
                                    <option>Action</option>
                                    <option value="0" %>
                                        >Deactivate</option>
                                    <option value="1" %>
                                        >Activate</option>
                                    <option value="99" %>
                                        >Forget</option>
                                </select>
                            </td>
                        </tr>
                        <% }); %>
                </tbody>
            </table>
            <% } %>
</div>

<script>
    function updateUserStatus(event) {
        const { value, name: userId } = event.target;
        console.log("value+-+-", value)
        console.log("name+-+-", userId)
        // fetch(`/users/update-status/${userId}`, {
        //     method: 'POST',
        //     headers: {
        //         'Content-Type': 'application/json'
        //     },
        //     body: JSON.stringify({ status: status }) // Send the status in the request body
        // })
        // .then(response => {
        //     if (!response.ok) {
        //         throw new Error('Failed to update status');
        //     }
        //     return response.json(); // Assuming the API returns JSON response
        // })
        // .then(data => {
        //     alert('Status updated successfully!');
        //     // Optionally, update the UI based on the response
        //     console.log(data);
        // })
        // .catch(error => {
        //     alert('Error updating status: ' + error.message);
        //     console.error(error);
        // });
    }

</script>